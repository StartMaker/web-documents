##### HTTPS

http://liuduo.me/2018/05/14/https-detail/

HTTPS = HTTP + SSL

HTTPS = HTTP + 加密 + 数字签名 + 认证

SSL握手是在TCP连接结束后，HTTP建立之前进行的

    http的不足之处：
        1、通信内容使用明文——内容可能被窃听
        2、不验证通信方的身份——可能遭遇伪装
        3、无法验证报文的完整性——报文有可能已遭篡改
        
    解决明文问题：
        对称加密：加解密使用同一个秘钥
        非对称加密：加解密使用不同的秘钥（公钥、私钥）
    解决报文完整性-数字签名：
        数字签名可以证明数据的作者是谁。因为数字签名是由数据作者用只有作者本人才知道的私钥生成的校验和，因此，这些校验和就像来自于作者的个人“签名”一样。
        数字签名可以防止数据被篡改。如果数据被篡改过，校验和就不匹配了。由于校验和只有作者的保密的私钥才能产生，攻击者在没有私钥的情况下，以目前的技术还无法为篡改后的数据伪造出正确的校验和。
    解决无法验证报文完整性-数字证书认证：
        有了数字签名，就可以验证数据的来源和完整性了，但是仅有数字签名还是有漏洞。使用数字签名进行加密数据传输，数据接收方必须有一个公钥，如果这个公钥被篡改为了攻击者的公钥，那攻击者就可以用自己的私钥发送篡改后的数据了。
        数字证书：由第三方权威机构颁发，难以伪造
        
HTTPS通信过程：
    
    step 1、客户端向服务器端发送ClientHello报文，请求建立https
        ClientHello报文结构：
            客户端支持的ssl版本
            客户端支持的加密算法
            客户端支持的秘钥长度
    step 2、服务器端收到ClientHello报文后，向客户端发送ServerHello报文
        ServerHello报文结构：
            决定使用的ssl版本
            决定加密算法
    step 3、服务器继续发送Certficate报文，即服务器的数字证书，其中包含服务器的公钥
    step 4、服务器发送一个ServerHelloDone报文，通知客户端最初的SSL握手协商部分结束
    step 5、客户端收到以上所有信息后，发送ClientKeyExchange报文作为回应，该报文已经使用步骤3中的公钥。公钥加密了一段Pre-master secret的随机密码串，后面会用此密码串进行通信
    step 6、客户端继续发送ChangeCipherSpec报文，该报文通知服务器会使用步骤5的密码串进行加密
    step 7、客户端发送Finish报文。改报文包含连接至今全部报文的整体校验值
    step 8、服务端对客户端进行校验后，同样发送ChangeCipherSpec报文，含义与步骤6中的一致
    step 9、服务端发送Finish报文
    step 10、服务端和客户端的Finish报文交换完毕后，SSL连接建立完成，从此开始应用层进行http通信
    step 11、http通信
    step 12、客户端发送close_notify报文请求连接断开，之后再发送tcp FIN报文来关闭TCP通信
    
HTTPS性能问题：

    HTTPS会做很多额外的事情，所以在性能上的开销比较大。
    
参考文献：
    
   《图解HTTP》
   《HTTP权威指南》